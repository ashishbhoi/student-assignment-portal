@page
@model ExternalLoginsModel
@{
    ViewData["Title"] = "Manage your external logins";
    ViewData["ActivePage"] = ManageNavPages.ExternalLogins;
}

<div class="rounded-2xl border border-white/40 bg-white/40 backdrop-blur-xl shadow-xl p-8 dark:border-white/10 dark:bg-black/30">
    <h3 class="text-2xl font-bold text-on-surface dark:text-dark-on-surface mb-6 drop-shadow-sm">@ViewData["Title"]</h3>
    <partial name="_StatusMessage" for="StatusMessage"/>

    @if (Model.CurrentLogins?.Count > 0)
    {
        <h4 class="text-lg font-bold text-on-surface dark:text-dark-on-surface mb-4 uppercase tracking-wide">Registered Logins</h4>
        <div class="space-y-4">
            @foreach (var login in Model.CurrentLogins)
            {
                <div
                    class="flex items-center justify-between bg-white/50 dark:bg-black/20 border border-white/30 dark:border-white/10 p-4 rounded-xl shadow-sm backdrop-blur-sm">
                    <div id="@($"login-provider-{login.LoginProvider}")"
                         class="font-bold text-on-surface dark:text-dark-on-surface">@login.ProviderDisplayName</div>
                    <div>
                        @if (Model.ShowRemoveButton)
                        {
                            <form id="@($"remove-login-{login.LoginProvider}")" asp-page-handler="RemoveLogin"
                                  method="post">
                                <div>
                                    <input asp-for="@login.LoginProvider" name="LoginProvider" type="hidden"/>
                                    <input asp-for="@login.ProviderKey" name="ProviderKey" type="hidden"/>
                                    <button type="submit"
                                            class="inline-flex items-center justify-center rounded-lg text-sm font-bold transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 border border-error/30 bg-error/10 hover:bg-error/20 text-error h-9 px-4 py-2 dark:text-red-400 dark:border-red-900/50 dark:bg-red-900/20"
                                            title="Remove this @login.ProviderDisplayName login from your account">
                                        Remove
                                    </button>
                                </div>
                            </form>
                        }
                        else
                        {
                            @: &nbsp;
                        }
                    </div>
                </div>
            }
        </div>
    }

    @if (Model.OtherLogins?.Count > 0)
    {
        <h4 class="text-lg font-bold text-on-surface dark:text-dark-on-surface mt-8 mb-4 uppercase tracking-wide">Add another service to log in.</h4>
        <hr class="border-white/20 dark:border-white/10 mb-6"/>
        <form id="link-login-form" asp-page-handler="LinkLogin" method="post">
            <div id="socialLoginList" class="space-y-3">
                @foreach (var provider in Model.OtherLogins)
                {
                    <button id="@($"link-login-button-{provider.Name}")" type="submit"
                            class="w-full inline-flex items-center justify-center rounded-xl text-sm font-bold transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring border border-white/30 bg-white/20 hover:bg-white/40 text-on-surface h-11 px-4 py-2 dark:border-white/10 dark:bg-black/20 dark:text-dark-on-surface dark:hover:bg-black/30 shadow-sm"
                            name="provider" value="@provider.Name"
                            title="Log in using your @provider.DisplayName account">@provider.DisplayName</button>
                }
            </div>
        </form>
    }
</div>
